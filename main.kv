MDScreenManager:
    RestScreen:
    ActiveScreen:
    WelcomeScreen:
    HomeScreen:
    SelectWorkoutScreen:
    SettingsScreen:
    StartWorkoutScreen:

<WelcomeScreen>:
    name: "welcome"
    MDBoxLayout:
        md_bg_color: app.get_color_tuple(app.screen_color)
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        MDLabel:
            text: "Welcome to the Workout App"
            halign: "center"
            font_style: "H5"
        MDRaisedButton:
            text: "Continue"
            pos_hint: {"center_x": 0.5}
            on_release: app.root.current = "home"
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)

<HomeScreen>:
    name: "home"
    MDBoxLayout:
        md_bg_color: app.get_color_tuple(app.screen_color)
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        MDLabel:
            text: "Home"
            halign: "center"
            font_style: "H5"
        MDRaisedButton:
            text: "Select Workout"
            pos_hint: {"center_x": 0.5}
            on_release: app.root.current = "select_workout"
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)
        MDRaisedButton:
            text: "Settings"
            pos_hint: {"center_x": 0.5}
            on_release: app.root.current = "settings"
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)
        MDRaisedButton:
            text: "Start Workout"
            pos_hint: {"center_x": 0.5}
            on_release: app.root.current = "start_workout"
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)

<SelectWorkoutScreen>:
    name: "select_workout"
    MDBoxLayout:
        md_bg_color: app.get_color_tuple(app.screen_color)
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        MDLabel:
            text: "Select Workout"
            halign: "center"
            font_style: "H5"
        MDRaisedButton:
            text: "Start"
            pos_hint: {"center_x": 0.5}
            on_release: app.root.current = "start_workout"
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)
        MDRaisedButton:
            text: "Back"
            pos_hint: {"center_x": 0.5}
            on_release: app.root.current = "home"
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)

<SettingsScreen>:
    name: "settings"
    md_bg_color: app.get_color_tuple(app.screen_color)
    MDBoxLayout:
        md_bg_color: app.get_color_tuple(app.screen_color)
        orientation: "vertical"
        MDTopAppBar:
            title: "Settings"
            left_action_items: [["arrow-left", lambda x: app.go_home()]]
            elevation: 10
        MDBoxLayout:
            orientation: "vertical"
            spacing: dp(20)
            padding: dp(20)
            MDRaisedButton:
                text: "Change Screen Color"
                pos_hint: {"center_x": 0.5}
                on_release: app.open_screen_color_picker()
                md_bg_color: app.get_color_tuple(app.button_color)
                text_color: app.get_color_tuple(app.button_text_color)
            MDRaisedButton:
                text: "Change Button Color"
                pos_hint: {"center_x": 0.5}
                on_release: app.open_button_color_picker()
                md_bg_color: app.get_color_tuple(app.button_color)
                text_color: app.get_color_tuple(app.button_text_color)

<StartWorkoutScreen>:
    name: "start_workout"
    MDBoxLayout:
        md_bg_color: app.get_color_tuple(app.screen_color)
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        MDLabel:
            text: "Ready to start?"
            halign: "center"
            font_style: "H5"
        MDRaisedButton:
            text: "Begin"
            pos_hint: {"center_x": 0.5}
            on_release: app.root.current = "rest"
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)
        MDRaisedButton:
            text: "Back"
            pos_hint: {"center_x": 0.5}
            on_release: app.go_home()
            md_bg_color: app.get_color_tuple(app.button_color)
            text_color: app.get_color_tuple(app.button_text_color)

<ActiveScreen>:
    name: "active"
    MDBoxLayout:
        md_bg_color: app.get_color_tuple(app.screen_color)
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        MDLabel:
            text: "Active Workout"
            halign: "center"
            font_style: "H5"

        MDLabel:
            id: active_timer
            text: '{:02d}:{:02d}'.format(int(root.time_elapsed // 60), int(root.time_elapsed % 60))
            halign: "center"
            font_style: "H2"


<RestScreen>:
    name: "rest"
    MDBoxLayout:
        md_bg_color: app.get_color_tuple(app.screen_color)
        orientation: "vertical"
        spacing: dp(20)
        padding: dp(20)
        MDLabel:
            text: "Rest"
            halign: "center"
            font_style: "H5"
        MDRaisedButton:

            id: rest_timer
            text: str(root.timer)
            on_release: root.toggle_ready()
            md_bg_color: (0,1,0,1) if root.ready else (1,0,0,1)
            size_hint_y: None
            height: dp(200)
            font_size: "48sp"

